{% extends "base.html" %}
{% load static %}

{% block content %}

<div class="container py-5" style="max-width: 850px;">
    <h2 class="fw-bold text-primary mb-4">{{ quiz.title }}</h2>

    <form method="post" id="quizForm">
        {% csrf_token %}
        {% for question in quiz.questions.all %}
        <div class="mb-4 p-3 border rounded bg-white shadow-sm">
            <h5 class="fw-semibold mb-3">{{ forloop.counter }}. {{ question.text }}</h5>

            {% for choice in question.choices.all %}
            <label class="d-flex align-items-center p-2 border rounded mb-2" style="cursor:pointer;">
                <input type="radio" name="question_{{ question.id }}" value="{{ choice.id }}" class="me-2" required>
                <span>{{ choice.text }}</span>
            </label>
            {% endfor %}
        </div>
        {% endfor %}

        <button class="btn btn-primary w-100 py-3 fw-semibold">Submit Quiz</button>
    </form>
</div>

{% endblock %}

{% block extra_scripts %}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0"></script>

<script>
{% if passed %}
    confetti({
        particleCount: 350,
        spread: 110,
        origin: { y: 0.6 }
    });

    Swal.fire({
        title: "ğŸ‰ Ù…Ù…ØªØ§Ø²!",
        text: "Ø£Ø­Ø³Ù†Øª! Ø³ÙŠØªÙ… Ù†Ù‚Ù„Ùƒ Ø§Ù„Ø¢Ù† Ù„Ù„Ø¯Ø±Ø³ Ø§Ù„ØªØ§Ù„ÙŠ âœ…",
        icon: "success",
        showConfirmButton: false,
        timer: 2500,
    });

    setTimeout(() => { window.location.href = "{{ redirect_url }}"; }, 2500);

{% elif failed %}
    Swal.fire({
        title: "âŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰",
        text: "Ù„Ù… ØªØ­Ù‚Ù‚ Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ø¬Ø§Ø­. Ø¨Ø¥Ù…ÙƒØ§Ù†Ùƒ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø¬Ø¯Ø¯Ù‹Ø§ ğŸ’ª",
        icon: "error",
        confirmButtonText: "Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©"
    });
{% endif %}
</script>
{% endblock %}
